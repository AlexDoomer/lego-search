<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–∏—Å–∫ –¥–µ—Ç–∞–ª–µ–π Lego</title>
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            line-height: 1.6;
            position: relative;
            min-height: 100vh;
            padding-bottom: 40px;
        }
        .header-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 10px;
        }
        .lego-brick {
            width: 40px;
            height: 40px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="40" rx="5" ry="5" fill="%23e74c3c"/><rect x="15" y="15" width="70" height="30" rx="3" ry="3" fill="%23c0392b"/><circle cx="25" cy="25" r="3" fill="%23fff"/><circle cx="50" cy="25" r="3" fill="%23fff"/><circle cx="75" cy="25" r="3" fill="%23fff"/><circle cx="25" cy="45" r="3" fill="%23fff"/><circle cx="50" cy="45" r="3" fill="%23fff"/><circle cx="75" cy="45" r="3" fill="%23fff"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
        }
        .vintage-title {
            font-family: 'MedievalSharp', cursive;
            font-size: 48px;
            text-align: center;
            color: #d4af37;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        h1 {
            color: #e74c3c;
            text-align: center;
            margin-top: 0;
        }
        #search {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #3498db;
            border-radius: 4px;
            box-sizing: border-box;
            margin-top: 10px;
            margin-bottom: 20px;
        }
        #results {
            margin-top: 20px;
        }
        .item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: background-color 0.3s;
        }
        .item:hover {
            background-color: #f9f9f9;
        }
        .item h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        .item a {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 15px;
            background-color: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 4px;
        }
        .item a:hover {
            background-color: #2980b9;
        }
        .no-results {
            color: #7f8c8d;
            text-align: center;
            padding: 20px;
        }
        .articul-highlight {
            background-color: #fffde7;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }
        .search-type {
            display: flex;
            margin-bottom: 10px;
            gap: 15px;
        }
        .search-type label {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }
        .results-count {
            margin-bottom: 10px;
            color: #7f8c8d;
        }
        .folder-icon {
            color: #27ae60;
            margin-right: 5px;
        }
        .articul-list {
            font-size: 14px;
            color: #7f8c8d;
            margin-top: 5px;
        }
        .info-block {
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            font-size: 0.8em;
            line-height: 1.4;
        }
        .info-block a {
            color: #3498db;
            text-decoration: none;
        }
        .info-block a:hover {
            text-decoration: underline;
        }
        .info-block ul {
            padding-left: 20px;
            margin-top: 5px;
            margin-bottom: 5px;
        }
        .info-block li {
            margin-bottom: 3px;
        }
        .copyright {
            position: absolute;
            bottom: 10px;
            right: 20px;
            font-size: 0.8em;
            color: #7f8c8d;
        }
        .yandex-link {
            display: block;
            width: 100%;
            text-align: center;
            margin: 20px 0;
        }
        .yandex-link a {
            display: inline-block;
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .yandex-link a:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <div class="header-container">
        <div class="lego-brick"></div>
        <div class="vintage-title">Alex-Bricks</div>
        <div class="lego-brick"></div>
    </div>
    <h1>üîç –ü–æ–∏—Å–∫ –¥–µ—Ç–∞–ª–µ–π Lego</h1>
    
    <div class="search-type">
        <label>
            <input type="radio" name="searchType" value="articul" checked> –ü–æ –∞—Ä—Ç–∏–∫—É–ª—É
        </label>
        <label>
            <input type="radio" name="searchType" value="name"> –ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é
        </label>
    </div>
    
    <input type="text" id="search" placeholder="–í–≤–µ–¥–∏—Ç–µ –∞—Ä—Ç–∏–∫—É–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä: 11091)" autofocus>
    
    <div class="yandex-link">
        <a href="https://disk.yandex.ru/d/L-HCAdgu_qC7_A" target="_blank">–ë–∞–∑–∞ –õ–µ–≥–æ –Ω–∞ –Ø–Ω–¥–µ–∫—Å–µ</a>
    </div>
    
    <div id="info-block" class="info-block">
        <p>–£—Å–ø–µ—à–Ω—ã—Ö –≤–∞–º –ø–æ–∏—Å–∫–æ–≤! Alex-Bricks –ª—é–±–∏—Ç –≤–∞—Å! ;)</p>
        
        <p>–í–Ω–∏–º–∞–Ω–∏–µ! –ù–µ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã, –Ω–æ —Å—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏:</p>
        <ul>
            <li>–±—Ä–∏–∫–∏,–ø–ª—ç–π—Ç—ã,—Ç–∞–π–ª—ã,–¥–∂–∞–º–ø–µ—Ä—ã —Å—Ç–∞—Ä—ã—Ö –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã—Ö –æ—Ç—Ç–µ–Ω–∫–æ–≤ —à–∏—Ä–∏–Ω–æ–π ‚â§ "2" –∏ –≤—ã—Å–æ—Ç–æ–π ‚â§ ¬´1¬ª (<a href="https://disk.yandex.ru/client/disk/%D0%91%D0%B0%D0%B7%D0%B0%20%D0%9B%D0%B5%D0%B3%D0%BE/%D0%94%D0%B5%D1%82%D0%B0%D0%BB%D0%B8/%D0%91%D1%80%D0%B8%D0%BA%D1%81%2C%D0%9F%D0%BB%D1%8D%D1%82%D1%81%2C%D0%A2%D0%B0%D0%B9%D0%BB%D1%81%20(%D0%BF%D1%80%D1%8F%D0%BC)" target="_blank">—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –±–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ —Ç—É—Ç</a>)</li>
            <li>—Ç–∞–π–ª—ã –∏ –¥–∂–∞–º–ø–µ—Ä—ã –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤ —à–∏—Ä–∏–Ω–æ–π ‚â§ "2" –∏ –≤—ã—Å–æ—Ç–æ–π ‚â§ ¬´1¬ª (<a href="https://disk.yandex.ru/client/disk/%D0%91%D0%B0%D0%B7%D0%B0%20%D0%9B%D0%B5%D0%B3%D0%BE/%D0%94%D0%B5%D1%82%D0%B0%D0%BB%D0%B8/%D0%91%D1%80%D0%B8%D0%BA%D1%81%2C%D0%9F%D0%BB%D1%8D%D1%82%D1%81%2C%D0%A2%D0%B0%D0%B9%D0%BB%D1%81%20(%D0%BF%D1%80%D1%8F%D0%BC)/%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5%20%D1%86%D0%B2%D0%B5%D1%82%D0%B0%20(txt)/%D0%A2%D0%B0%D0%B9%D0%BB%D1%8B%20%D0%B8%20%D0%B4%D0%B6%D0%B0%D0%BC%D0%BF%D0%B5%D1%80%D1%8B" target="_blank">—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –±–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ —Ç—É—Ç</a>)</li>
            <li>–ø—Ä–∏–Ω—Ç–æ–≤–∞–Ω–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –Ω–æ–≤–µ–µ 2006 –≥–æ–¥–∞ (<a href="https://disk.yandex.ru/d/L-HCAdgu_qC7_A/%D0%94%D0%B5%D1%82%D0%B0%D0%BB%D0%B8/%D0%9F%D1%80%D0%B8%D0%BD%D1%82%D1%8B/%D0%9D%D0%BE%D0%B2%D1%8B%D0%B5%20(%D0%BF0%BE%D1%81%D0%BB%D0%B5%202006)" target="_blank">—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –±–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ —Ç—É—Ç</a>)</li>
            <li>–Ω–∞–∫–ª–µ–π–∫–∏ –Ω–æ–≤–µ–µ 2006 –≥–æ–¥–∞ (<a href="https://disk.yandex.ru/d/L-HCAdgu_qC7_A/%D0%94%D0%B5%D1%82%D0%B0%D0%BB%D0%B8/%D0%9D%D0%B0%D0%BA%D0%BB%D0%B5%D0%B9%D0%BA%D0%B8/%D0%9D%D0%B0%D0%BA%D0%BB%D0%B5%D0%B9%D0%BA%D0%B8%20%D0%BD%D0%BE%D0%B2%20_2006" target="_blank">—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –±–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ —Ç—É—Ç</a>)</li>
            <li>–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∫ –Ω–∞–±–æ—Ä–∞–º (<a href="https://disk.yandex.ru/d/L-HCAdgu_qC7_A/%D0%9A%D0%BE%D1%80%D0%BE%D0%B1%D0%BA%D0%B8%20%D0%B8%20%D0%98%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D0%B8/%D0%98%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D0%B8" target="_blank">—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –±–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ —Ç—É—Ç</a>)</li>
            <li>–∫–æ—Ä–æ–±–∫–∏ –∫ –Ω–∞–±–æ—Ä–∞–º (<a href="https://disk.yandex.ru/d/L-HCAdgu_qC7_A/%D0%9A%D0%BE%D1%80%D0%BE%D0%B1%D0%BA%D0%B8%20%D0%B8%20%D0%98%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D0%B8/%D0%9A%D0%BE%D1%80%D0%BE%D0%B1%D0%BA%D0%B8" target="_blank">—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –±–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ —Ç—É—Ç</a>)</li>
        </ul>
        
        <p>–ù–µ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –∏ –Ω–µ —Å—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ—Ç–∞–ª–∏:</p>
        <ul>
            <li>–±—Ä–∏–∫–∏ –∏ –ø–ª—ç–π—Ç—ã –≤—Å–µ—Ö —Ü–≤–µ—Ç–æ–≤ –∫—Ä–æ–º–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã—Ö –∏ —Å—Ç–∞—Ä—ã—Ö –æ—Ç—Ç–µ–Ω–∫–æ–≤ —à–∏—Ä–∏–Ω–æ–π ‚â§ "2" –∏ –≤—ã—Å–æ—Ç–æ–π ‚â§ ¬´1¬ª (–≤ –±–∞–∑–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤ –Ω–µ—Ç, —É—Ç–æ—á–Ω—è–π—Ç–µ –Ω–∞–ª–∏—á–∏–µ –≤ –ª–∏—á–∫—É –Ω–∞ –ê–≤–∏—Ç–æ)</li>
        </ul>
    </div>
    
    <div id="results"></div>
    
    <div class="copyright">AlexDoomer, 2025 ¬©</div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const PUBLIC_FOLDER_ID = "L-HCAdgu_qC7_A";
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–¥–µ–∫—Å–∞
        async function loadIndex() {
            try {
                const response = await fetch('lego_index_full.json');
                return await response.json();
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω–¥–µ–∫—Å–∞:", error);
                return {};
            }
        }

        // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫
        function getYandexLink(path) {
            const encodedPath = path.split('/')
                .map(part => encodeURIComponent(part))
                .join('/');
            return `https://disk.yandex.ru/d/${PUBLIC_FOLDER_ID}/${encodedPath}`;
        }

        // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∞—Ä—Ç–∏–∫—É–ª–æ–≤ –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è (–¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è)
        function extractDisplayArticuls(name) {
            return name.match(/([a-zA-Z]*\d+[a-zA-Z]*)/g) || [];
        }

        // –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º –ø–∞–ø–æ–∫
        async function searchByName(query) {
            const index = await loadIndex();
            const queryLower = query.toLowerCase();
            const results = [];
            const addedPaths = new Set();

            // –ò—â–µ–º –≤–æ –≤—Å–µ—Ö –ø–∞–ø–∫–∞—Ö
            if (index._all_folders) {
                for (const folder of index._all_folders) {
                    if (folder.name.toLowerCase().includes(queryLower)) {
                        const path = folder.path;
                        if (!addedPaths.has(path)) {
                            addedPaths.add(path);
                            results.push({
                                path: path,
                                name: folder.name,
                                isArticul: false
                            });
                        }
                    }
                }
            }

            return results;
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function displayResults(results, query) {
            const resultsDiv = document.getElementById('results');
            const infoBlock = document.getElementById('info-block');
            resultsDiv.innerHTML = '';
            
            if (results.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="no-results">
                        –ü–æ –∑–∞–ø—Ä–æ—Å—É "${query}" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.
                    </div>
                `;
                // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –∏–Ω—Ñ–æ–±–ª–æ–∫ –ø–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                resultsDiv.appendChild(infoBlock);
                return;
            }
            
            // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
            results.sort((a, b) => a.name.localeCompare(b.name));
            
            let html = `
                <div class="results-count">
                    –ù–∞–π–¥–µ–Ω–æ: ${results.length} ${results.length === 1 ? '—Ä–µ–∑—É–ª—å—Ç–∞—Ç' : results.length < 5 ? '—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞' : '—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤'}
                </div>
            `;
            
            results.forEach(item => {
                const yandexLink = getYandexLink(item.path);
                const highlightedName = item.name.replace(
                    new RegExp(query, 'gi'), 
                    match => `<span class="articul-highlight">${match}</span>`
                );
                
                // –ò–∑–≤–ª–µ–∫–∞–µ–º –≤—Å–µ –∞—Ä—Ç–∏–∫—É–ª—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
                const articuls = extractDisplayArticuls(item.name);
                const articulsHtml = articuls.length > 0 
                    ? `<div class="articul-list">–ê—Ä—Ç–∏–∫—É–ª—ã: ${articuls.join(', ')}</div>` 
                    : '';
                
                html += `
                    <div class="item">
                        <h3>
                            <span class="folder-icon">${item.isArticul ? 'üîπ' : 'üìÅ'}</span>
                            ${highlightedName}
                        </h3>
                        <p>–ü—É—Ç—å: ${item.path.replace(/\//g, ' / ')}</p>
                        ${articulsHtml}
                        <a href="${yandexLink}" target="_blank">–û—Ç–∫—Ä—ã—Ç—å –ø–∞–ø–∫—É</a>
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
            // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –∏–Ω—Ñ–æ–±–ª–æ–∫ –ø–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            resultsDiv.appendChild(infoBlock);
        }

        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞
        async function search() {
            const query = document.getElementById('search').value.trim();
            if (!query) {
                document.getElementById('results').innerHTML = '';
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–Ω—Ñ–æ–±–ª–æ–∫ –Ω–∞ –º–µ—Å—Ç–æ, –µ—Å–ª–∏ –ø–æ–∏—Å–∫ –æ—á–∏—â–µ–Ω
                const container = document.body;
                const searchElement = document.getElementById('search');
                const infoBlock = document.getElementById('info-block');
                container.insertBefore(infoBlock, searchElement.nextSibling.nextSibling);
                return;
            }

            const searchType = document.querySelector('input[name="searchType"]:checked').value;
            let results = [];
            
            if (searchType === 'articul') {
                const index = await loadIndex();
                results = index[query] || [];
            } else {
                results = await searchByName(query);
            }

            displayResults(results, query);
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        let searchTimeout;
        document.getElementById('search').addEventListener('input', () => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(search, 300);
        });

        document.getElementById('search').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') search();
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–∏–ø–∞ –ø–æ–∏—Å–∫–∞
        document.querySelectorAll('input[name="searchType"]').forEach(radio => {
            radio.addEventListener('change', () => {
                const placeholder = radio.value === 'articul' 
                    ? "–í–≤–µ–¥–∏—Ç–µ –∞—Ä—Ç–∏–∫—É–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä: 11091)" 
                    : "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏";
                document.getElementById('search').placeholder = placeholder;
                document.getElementById('search').focus();
            });
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const articul = urlParams.get('articul');
            if (articul) {
                document.getElementById('search').value = articul;
                search();
            }
        });
    </script>
</body>
</html>
